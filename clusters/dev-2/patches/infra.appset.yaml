---
- op: add
  path: /spec/generators
  value:
    - matrix:
        generators:
          - list:
              elements:
                - clusterName: dev-2
          - list:
              elements:
                - name: cert-manager
                  namespace: cert-manager
                  path: apps/cert-manager/overlays/{{.clusterName}}
                  wave: 0

                - name: external-secrets
                  namespace: external-secrets
                  path: apps/external-secrets/overlays/{{.clusterName}}
                  wave: 0

                - name: metrics-server
                  namespace: kube-system
                  path: apps/metrics-server/overlays/{{.clusterName}}
                  wave: 0

                - name: secret-stores
                  namespace: external-secrets
                  path: apps/secret-stores/overlays/{{ .clusterName }}
                  wave: 1

                - name: o11y
                  namespace: o11y
                  path: apps/o11y/overlays/{{ .clusterName }}
                  wave: 2
                  syncServerSideApply: true

                - name: argocd-secrets
                  namespace: argocd
                  path: apps/argocd-secrets/overlays/{{ .clusterName }}
                  wave: 2

                - name: aws-lb-controller
                  namespace: kube-system
                  path: apps/aws-lb-controller/overlays/{{ .clusterName }}
                  wave: 3

                - name: argocd-ingress
                  namespace: argocd
                  path: apps/argocd-ingress/overlays/{{ .clusterName }}
                  wave: 3
